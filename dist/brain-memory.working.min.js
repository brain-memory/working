;(function(b){if(b==null){return;}function noop(){}function keyFromArgs(args){return args.join(',');}function WorkingBuilders(){}WorkingBuilders.callable=function(memo,callback){return function(){var args=Array.prototype.slice.call(arguments);var key=keyFromArgs(args);if(memo.hasRecord(key)){return memo.recall(key);}var result=callback.apply(null,args);memo.record(key,result);return result;};};WorkingBuilders.reseter=function(memo){return function(condition){if(condition==null){condition=true;}if(condition===true){memo.forgetAll();}};};WorkingBuilders.unset=function(memo){return function(){var args=Array.prototype.slice.call(arguments);memo.forget(keyFromArgs(args));};};function Working(key,callback){if(callback==null){callback=noop;}this.TEMP_WORKING_PREFIX="__temp_working__";this.memo=BrainMemory.temporary(this.TEMP_WORKING_PREFIX+key);this.callback=callback;}Working.prototype.build=function(){var callable=WorkingBuilders.callable(this.memo,this.callback);callable.reset=WorkingBuilders.reseter(this.memo);callable.unset=WorkingBuilders.unset(this.memo);return callable;};b.working=function(key,callback){return new Working(key,callback).build();};}(BrainMemory));
